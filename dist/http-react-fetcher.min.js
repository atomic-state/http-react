"use strict";/**
 * @license http-react-fetcher
 * Copyright (c) Dany Beltran
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ (()=>{var e=this&&this.__assign||function(){return(e=Object.assign||function(d){for(var a,b=1,e=arguments.length;b<e;b++)for(var c in a=arguments[b])Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d}).apply(this,arguments)},f=this&&this.__awaiter||function(b,c,a,d){return new(a||(a=Promise))(function(f,g){function h(a){try{e(d.next(a))}catch(b){g(b)}}function i(a){try{e(d.throw(a))}catch(b){g(b)}}function e(b){var c;b.done?f(b.value):((c=b.value)instanceof a?c:new a(function(a){a(c)})).then(h,i)}e((d=d.apply(b,c||[])).next())})},g=this&&this.__generator||function(b,c){var d,e,f,a,_={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return a={next:g(0),throw:g(1),return:g(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function g(a){return function(b){return h([a,b])}}function h(a){if(d)throw new TypeError("Generator is already executing.");for(;_;)try{if(d=1,e&&(f=2&a[0]?e.return:a[0]?e.throw||((f=e.return)&&f.call(e),0):e.next)&&!(f=f.call(e,a[1])).done)return f;switch(e=0,f&&(a=[2&a[0],f.value]),a[0]){case 0:case 1:f=a;break;case 4:return _.label++,{value:a[1],done:!1};case 5:_.label++,e=a[1],a=[0];continue;case 7:a=_.ops.pop(),_.trys.pop();continue;default:if(!(f=(f=_.trys).length>0&&f[f.length-1])&&(6===a[0]||2===a[0])){_=0;continue}if(3===a[0]&&(!f||a[1]>f[0]&&a[1]<f[3])){_.label=a[1];break}if(6===a[0]&&_.label<f[1]){_.label=f[1],f=a;break}if(f&&_.label<f[2]){_.label=f[2],_.ops.push(a);break}f[2]&&_.ops.pop(),_.trys.pop();continue}a=c.call(b,_)}catch(g){a=[6,g],e=0}finally{d=f=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},h=this&&this.__rest||function(b,e){var d={};for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&0>e.indexOf(a)&&(d[a]=b[a]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,a=Object.getOwnPropertySymbols(b);c<a.length;c++)0>e.indexOf(a[c])&&Object.prototype.propertyIsEnumerable.call(b,a[c])&&(d[a[c]]=b[a[c]]);return d},c=React;function b(a,b,c,d){return function(i,h){return void 0===h&&(h={}),f(this,void 0,void 0,function(){var f,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;return g(this,function(g){switch(g.label){case 0:f=h.default,j=h.resolver,k=void 0===j?function(a){return a.json()}:j,l=h.config,m=void 0===l?{}:l,n=h.onResolve,o=void 0===n?function(){}:n,p=h.onError,q=void 0===p?function(){}:p,r=e(e({},d),m.query),(u=void 0===(t=(s=i.split("?"))[1])?"":t).split("&").forEach(function(f){var a,b=f.split("="),c=b[0],d=b[1];r[c]!==d&&(r=e(e({},r),((a={})[c]=d,a)))}),v=Object.keys(r).map(function(a){return[a,r[a]].join("=")}).join("&"),x=void 0===(w=m.headers)?{}:w,y=m.body,z=m.formatBody,A={method:a,headers:e(e({"Content-Type":"application/json"},c),x),body:(null==a?void 0:a.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof z?z((FormData,y)):!1===z||"undefined"!=typeof FormData&&y instanceof FormData?y:JSON.stringify(y):void 0},B=void 0,g.label=1;case 1:return g.trys.push([1,4,,5]),[4,fetch("".concat(b||"").concat(i).concat(i.includes("?")?"&".concat(v):"?".concat(v)),A),];case 2:return B=C=g.sent(),[4,k(C)];case 3:if(D=g.sent(),(null==C?void 0:C.status)>=400)return q(!0),[2,{res:C,data:f,error:!0,code:null==C?void 0:C.status,config:e(e({url:"".concat(b||"").concat(i)},A),{query:r})},];return o(D,C),[2,{res:C,data:D,error:!1,code:null==C?void 0:C.status,config:e(e({url:"".concat(b||"").concat(i)},A),{query:r})},];case 4:return q(E=g.sent()),[2,{res:B,data:f,error:!0,code:null==B?void 0:B.status,config:e(e({url:"".concat(b||"").concat(i)},A),{query:r})},];case 5:return[2]}})})}}var i=(0,c.createContext)({defaults:{},attempts:0,attemptInterval:5,revalidateOnFocus:!1,query:{},onOffline:function(){},onOnline:function(){},online:!0,retryOnReconnect:!0}),j=function(a){var b=a.url,t=void 0===b?"/":b,u=a.default,d=a.config,h=void 0===d?{method:"GET",headers:{},body:{}}:d,i=a.children,j=a.onError,v=void 0===j?function(){}:j,k=a.onResolve,w=void 0===k?function(){}:k,l=a.refresh,m=void 0===l?0:l,n=(0,c.useState)(u),o=n[0],x=n[1],p=(0,c.useState)(null),q=p[0],y=p[1],r=(0,c.useState)(!0),s=r[0],z=r[1];function A(){var a;return f(this,void 0,void 0,function(){var b,c,d,f;return g(this,function(g){switch(g.label){case 0:return g.trys.push([0,3,4,5]),[4,fetch(t,{method:h.method,headers:e({"Content-Type":"application/json"},h.headers),body:(null===(a=h.method)|| void 0===a?void 0:a.match(/(POST|PUT|DELETE|PATCH)/))?JSON.stringify(h.body):void 0}),];case 1:return[4,(b=g.sent()).json()];case 2:return c=g.sent(),(d=b.status)>=200&&d<300?(x(c),y(null),w(c,b)):(u&&x(u),y(!0),v(c)),[3,5];case 3:return f=g.sent(),x(void 0),y(new Error(f)),v(f),[3,5];case 4:return z(!1),[7];case 5:return[2]}})})}return((0,c.useEffect)(function(){if(m>0){var a=setTimeout(function(){return f(this,void 0,void 0,function(){return g(this,function(a){return(o||q)&&!s&&(z(!0),A()),[2]})})},1e3*m);return function(){return clearTimeout(a)}}},[m,s,q,o,h]),(0,c.useEffect)(function(){z(!0),A()},[t,m,h]),void 0!==i)?React.createElement(i,{data:o,error:q,loading:s}):null},k={};function d(a){var l=a.children,d=a.defaults,f=void 0===d?{}:d,g=a.baseUrl,b=(0,c.useContext)(i),m=void 0===g?void 0===b.baseUrl?"":b.baseUrl:g;for(var h in f)k["".concat(m).concat(h)]=f[h];var j=e(e({},b),a);for(var n in a)"headers"===n&&(j.headers=e(e({},b.headers),a.headers));return React.createElement(i.Provider,{value:j},l)}var a=function(l,X){var a=(0,c.useContext)(i),b="string"==typeof l?e({url:l},X):l,p=b.onOnline,q=void 0===p?a.onOnline:p,r=b.onOffline,ao=void 0===r?a.onOffline:r,s=b.retryOnReconnect,Y=void 0===s?a.retryOnReconnect:s,t=b.url,h=void 0===t?"/":t,Z=b.default,u=b.config,d=void 0===u?{query:{},baseUrl:void 0,method:"GET",headers:{},body:void 0,formatBody:!1}:u,v=b.resolver,ap=void 0===v?"function"==typeof a.resolver?a.resolver:function(a){return a.json()}:v,w=b.onError,aq=void 0===w?function(){}:w,x=b.auto,ar=void 0===x?void 0===a.auto||a.memory:x,y=b.memory,$=void 0===y?void 0===a.memory||a.memory:y,z=b.onResolve,as=void 0===z?function(){}:z,A=b.onAbort,aa=void 0===A?function(){}:A,B=b.refresh,m=void 0===B?void 0===a.refresh?0:a.refresh:B,C=b.cancelOnChange,at=void 0===C?void 0!==a.refresh&&a.refresh:C,D=b.attempts,ab=void 0===D?a.attempts:D,E=b.attemptInterval,ac=void 0===E?a.attemptInterval:E,F=b.revalidateOnFocus,ad=void 0===F?a.revalidateOnFocus:F,G=(0,c.useState)(e(e({},a.query),d.query)),j=G[0],au=G[1];(0,c.useEffect)(function(){au(e(e({},a.query),d.query))},[JSON.stringify(a.query),JSON.stringify(d.query),h]);var H=(void 0===d.baseUrl?void 0===a.baseUrl?"":a.baseUrl:d.baseUrl)+h,I=Object.keys(j).map(function(a){return[a,j[a]].join("=")}).join("&"),ae=H+(H.includes("?")?"&".concat(I):"?"+I),J=ae.split("?"),K=J[0],av=J[1],L=(0,c.useState)(!1),af=L[0],aw=L[1];(0,c.useEffect)(function(){aw(!1);var a={};av.split("&").forEach(function(e,f){var b=e.split("="),c=b[0],d=b[1];a[c]!==d&&(a[c]=d)});var b=setTimeout(function(){au(function(b){return e(e({},b),a)}),clearTimeout(b)},0),c=setTimeout(function(){aw(!0),clearTimeout(c)},0)},[JSON.stringify(j)]);var M=(0,c.useState)($&&k[K]||Z),N=M[0],ag=M[1],O=(0,c.useState)("undefined"!=typeof FormData?d.body instanceof FormData?d.body:void 0!==a.body|| void 0!==d.body?e(e({},a.body),d.body):void 0:d.body),ah=O[0],ax=O[1],P=(0,c.useState)(e(e({},a.headers),d.headers)),ai=P[0],ay=P[1],Q=(0,c.useState)(),aj=Q[0],az=Q[1],R=(0,c.useState)(),ak=R[0],aA=R[1],S=(0,c.useState)(null),n=S[0],aB=S[1],T=(0,c.useState)(!0),o=T[0],aC=T[1],U=(0,c.useState)(0),al=U[0],aD=U[1],V=(0,c.useState)(new AbortController),am=V[0],aE=V[1];function aF(a){var b;return void 0===a&&(a={}),f(this,void 0,void 0,function(){var c,f,h,i,j,l;return g(this,function(g){switch(g.label){case 0:at&&(null==am||am.abort()),c=new AbortController,aE(c),aB(null),g.label=1;case 1:return g.trys.push([1,4,5,6]),[4,fetch(ae,{signal:c.signal,method:d.method,headers:e(e({"Content-Type":"undefined"!=typeof FormData&&d.body instanceof FormData?"multipart/form-data":"application/json"},d.headers),a.headers),body:(null===(b=d.method)|| void 0===b?void 0:b.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof d.formatBody?d.formatBody("undefined"!=typeof FormData&&d.body instanceof FormData?d.body:e(e({},d.body),a.body)):!1===d.formatBody||"undefined"!=typeof FormData&&d.body instanceof FormData?d.body:JSON.stringify(e(e({},d.body),a.body)):void 0}),];case 2:return az(f=g.sent()),aA(h=f.status),[4,ap(f)];case 3:return i=g.sent(),h>=200&&h<400?($&&(k[K]=i),ag(i),aB(null),as(i,f),aD(0)):(Z&&ag(Z),aB(!0),aq(i,f)),[3,6];case 4:return(l=null==(j=g.sent())?void 0:j.toString()).match(/abort/i)?k[K]||ag(Z):(ag(void 0),aB(new Error(j)),aq(j)),[3,6];case 5:return aC(!1),[7];case 6:return[2]}})})}function an(a){return void 0===a&&(a={}),f(this,void 0,void 0,function(){return g(this,function(b){return a.body&&ax(function(b){return e(e({},b),a.body)}),a.headers&&ay(function(b){return e(e({},b),a.headers)}),o||(aC(!0),aF(a)),[2]})})}(0,c.useEffect)(function(){var a=(am||{}).signal,b=function(){var a=setTimeout(function(){aa(),clearTimeout(a)})};return null==a||a.addEventListener("abort",b),function(){null==a||a.removeEventListener("abort",b)}},[am,aa]),(0,c.useEffect)(function(){function a(){var a=!1;q({cancel:function(){a=!0}}),a||an()}if("undefined"!=typeof window&&"addEventListener"in window&&Y)return window.addEventListener("online",a),function(){window.removeEventListener("online",a)}},[q,Y]),(0,c.useEffect)(function(){function a(){ao()}if("undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("offline",a),function(){window.removeEventListener("offline",a)}},[q]),(0,c.useEffect)(function(){ay(function(b){return e(e({},b),a.headers)})},[a.headers]),(0,c.useEffect)(function(){if(n&&al<ab)var a=setTimeout(function(){an(),aD(function(a){return a+1}),clearTimeout(a)},1e3*ac)},[n,ab,ac,al]),(0,c.useEffect)(function(){if(m>0&&ar){var a=setTimeout(an,1e3*m);return function(){return clearTimeout(a)}}},[m,o,n,N,d]);var W=JSON.stringify(Object.assign(a,{children:void 0},{resolver:void 0},{reqQuery:j}));return(0,c.useEffect)(function(){var a=setTimeout(function(){af&&(ar?(aC(!0),aF()):(void 0===N&&ag(Z),aB(null),aC(!1)))},0);return function(){clearTimeout(a)}},[h,W,a.children,m,JSON.stringify(d),af,]),(0,c.useEffect)(function(){if(ad&&"undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("focus",an),function(){window.removeEventListener("focus",an)}},[h,ad,W,o,a.children,m,JSON.stringify(d),]),{data:N,loading:o,error:n,code:ak,reFetch:an,mutate:ag,abort:function(){am.abort(),o&&(aB(!1),aC(!1),ag(k[K]))},config:e(e({},d),{headers:ai,body:ah,url:K,query:j}),response:aj}};a.get=b("GET","",{}),a.delete=b("DELETE","",{}),a.head=b("HEAD","",{}),a.options=b("OPTIONS","",{}),a.post=b("POST","",{}),a.put=b("PUT","",{}),a.patch=b("PATCH","",{}),a.purge=b("PURGE","",{}),a.link=b("LINK","",{}),a.unlink=b("UNLINK","",{}),a.extend=function(l){void 0===l&&(l={});var m=l.baseUrl,g=void 0===m?void 0:m,n=l.headers,j=void 0===n?{}:n,o=l.body,q=void 0===o?{}:o,p=l.query,k=void 0===p?{}:p,r=l.resolver;function f(f,o){var b=(0,c.useContext)(i),k="string"==typeof f?e({url:f},o):f,l=k.url,m=k.config,d=void 0===m?{}:m,n=h(k,["url","config"]);return a(e(e({},n),{url:"".concat(void 0===l?"":l),resolver:r||n.resolver||b.resolver||function(a){return a.json()},config:{baseUrl:void 0===d.baseUrl?void 0===b.baseUrl?g:b.baseUrl:d.baseUrl,method:d.method,headers:e(e(e({},j),b.headers),d.headers),body:e(e(e({},q),b.body),d.body)}}))}return f.config={baseUrl:g,headers:j,body:q,query:k},f.get=b("GET",g,j,k),f.delete=b("DELETE",g,j,k),f.head=b("HEAD",g,j,k),f.options=b("OPTIONS",g,j,k),f.post=b("POST",g,j,k),f.put=b("PUT",g,j,k),f.patch=b("PATCH",g,j,k),f.purge=b("PURGE",g,j,k),f.link=b("LINK",g,j,k),f.unlink=b("UNLINK",g,j,k),f.Config=d,f};var l={headers:{},body:void 0},m=function(){function a(a){this.baseUrl="",this.baseUrl=a}return a.prototype.get=function(d,a,b){var c=void 0===a?l:a,h=c.headers,i=c.body;return void 0===b&&(b="GET"),f(this,void 0,void 0,function(){var a,c,f;return g(this,function(g){switch(g.label){case 0:return[4,fetch(a="".concat(this.baseUrl).concat(d),e({method:b,headers:e({"Content-Type":"application/json",Accept:"application/json"},h)},i?{body:JSON.stringify(i)}:{})),];case 1:return[4,(c=g.sent()).json()];case 2:return[2,f=g.sent()]}})})},a.prototype.post=function(b,a){return void 0===a&&(a=l),f(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return[4,this.get(b,a,"POST")];case 1:return[2,c.sent()]}})})},a.prototype.put=function(b,a){return void 0===a&&(a=l),f(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return[4,this.get(b,a,"PUT")];case 1:return[2,c.sent()]}})})},a.prototype.delete=function(b,a){return void 0===a&&(a=l),f(this,void 0,void 0,function(){return g(this,function(c){switch(c.label){case 0:return[4,this.get(b,a,"DELETE")];case 1:return[2,c.sent()]}})})},a}();window.fetcher=a,window.FetcherConfig=d,window.useFetcher=a})()