"use strict";/**
 * @license http-react-fetcher
 * Copyright (c) Dany Beltran
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ (()=>{/**
   * @license http-react-fetcher
   * Copyright (c) Dany Beltran
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */ var e=this&&this.__rest||function(e,n){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&0>n.indexOf(t)&&(s[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,t=Object.getOwnPropertySymbols(e);i<t.length;i++)0>n.indexOf(t[i])&&Object.prototype.propertyIsEnumerable.call(e,t[i])&&(s[t[i]]=e[t[i]]);return s};let{useState:n,useEffect:s,createContext:t,useContext:i}=React;function r(e,n,s,t){return async function(i,r={}){let{default:a,resolver:o=e=>e.json(),config:l={},onResolve:d=()=>{},onError:u=()=>{}}=r,f=Object.assign(Object.assign({},t),l.query),[,g=""]=i.split("?");g.split("&").forEach(e=>{let[n,s]=e.split("=");f[n]!==s&&(f=Object.assign(Object.assign({},f),{[n]:s}))});let y=Object.keys(f).map(e=>[e,f[e]].join("=")).join("&"),{headers:c={},body:p,formatBody:$}=l,h={method:e,headers:Object.assign(Object.assign({"Content-Type":"application/json"},s),c),body:(null==e?void 0:e.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof $?$(p):!1===$||"undefined"!=typeof FormData&&p instanceof FormData?p:JSON.stringify(p):void 0},v;try{let b=await fetch(`${n||""}${i}${i.includes("?")?`&${y}`:`?${y}`}`,h);v=b;let m=await o(b);if((null==b?void 0:b.status)>=400)return u(!0),{res:b,data:a,error:!0,code:null==b?void 0:b.status,config:Object.assign(Object.assign({url:`${n||""}${i}`},h),{query:f})};return d(m,b),{res:b,data:m,error:!1,code:null==b?void 0:b.status,config:Object.assign(Object.assign({url:`${n||""}${i}`},h),{query:f})}}catch(E){return u(E),{res:v,data:a,error:!0,code:null==v?void 0:v.status,config:Object.assign(Object.assign({url:`${n||""}${i}`},h),{query:f})}}}}let a=t({defaults:{},attempts:0,attemptInterval:5,revalidateOnFocus:!1,query:{},params:{},onOffline(){},onOnline(){},online:!0,retryOnReconnect:!0}),o={};function l(e){let{children:n,defaults:s={},baseUrl:t}=e,r=i(a),l=void 0===t?void 0===r.baseUrl?"":r.baseUrl:t;for(let d in s)o[`${l}${d}`]=s[d];let u=Object.assign(Object.assign(Object.assign({},r),e),{headers:Object.assign(Object.assign({},r.headers),e.headers)});return React.createElement(a.Provider,{value:u},n)}let d=(e,t)=>{let r=i(a),{onOnline:l=r.onOnline,onOffline:d=r.onOffline,retryOnReconnect:u=r.retryOnReconnect,url:f="/",default:g,config:y={query:{},params:{},baseUrl:void 0,method:"GET",headers:{},body:void 0,formatBody:!1},resolver:c="function"==typeof r.resolver?r.resolver:e=>e.json(),onError:p=()=>{},auto:$=void 0===r.auto||r.memory,memory:h=void 0===r.memory||r.memory,onResolve:v=()=>{},onAbort:b=()=>{},refresh:m=void 0===r.refresh?0:r.refresh,cancelOnChange:E=void 0!==r.refresh&&r.refresh,attempts:T=r.attempts,attemptInterval:U=r.attemptInterval,revalidateOnFocus:P=r.revalidateOnFocus}="string"==typeof e?Object.assign({url:e},t):e,[O,L]=n(Object.assign(Object.assign({},r.query),y.query)),[w,_]=n(Object.assign(Object.assign({},r.params),y.params));s(()=>{_(Object.assign(Object.assign({},r.params),y.params))},[JSON.stringify(Object.assign(Object.assign({},r.params),y.params)),]),s(()=>{L(Object.assign(Object.assign({},r.query),y.query))},[JSON.stringify(r.query),JSON.stringify(y.query),f]);let j=(void 0===y.baseUrl?void 0===r.baseUrl?"":r.baseUrl:y.baseUrl)+f,q=React.useMemo(()=>j.split("/").map(e=>{if(e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/\[|\]/g,"");return n in w?w[e.replace(/\[|\]/g,"")]:(console.warn(`Param '${n}' does not exist in request configuration for '${f}'`),n)}if(!e.startsWith(":"))return e;{let s=e.split("").slice(1).join("");return s in w?w[s]:(console.warn(`Param '${s}' does not exist in request configuration for '${f}'`),s)}}).join("/"),[JSON.stringify(w),y.baseUrl,r.baseUrl,f]),C=Object.keys(O).map(e=>[e,O[e]].join("=")).join("&"),S=q+(q.includes("?")?`&${C}`:"?"+C),[I,N]=S.split("?"),[k,A]=n(!1);s(()=>{A(!1);let e={},n=N.split("&");n.forEach((n,s)=>{let[t,i]=n.split("=");e[t]!==i&&(e[t]=i)});let s=setTimeout(()=>{L(n=>Object.assign(Object.assign({},n),e)),clearTimeout(s)},0),t=setTimeout(()=>{A(!0),clearTimeout(t)},0)},[JSON.stringify(O)]);let[D,H]=n(h&&o[I]||g),[G,x]=n("undefined"!=typeof FormData?y.body instanceof FormData?y.body:void 0!==r.body||void 0!==y.body?Object.assign(Object.assign({},r.body),y.body):void 0:y.body),[F,B]=n(Object.assign(Object.assign({},r.headers),y.headers)),[K,R]=n(),[W,M]=n(),[z,J]=n(null),[Q,V]=n(!0),[X,Y]=n(0),[Z,ee]=n(new AbortController);async function en(e={}){var n;E&&(null==Z||Z.abort());let s=new AbortController;ee(s),J(null);try{let t=await fetch(S,{signal:s.signal,method:y.method,headers:Object.assign(Object.assign(Object.assign({"Content-Type":"undefined"!=typeof FormData&&y.body instanceof FormData?"multipart/form-data":"application/json"},r.headers),y.headers),e.headers),body:(null===(n=y.method)||void 0===n?void 0:n.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof y.formatBody?y.formatBody("undefined"!=typeof FormData&&y.body instanceof FormData?y.body:Object.assign(Object.assign({},y.body),e.body)):!1===y.formatBody||"undefined"!=typeof FormData&&y.body instanceof FormData?y.body:JSON.stringify(Object.assign(Object.assign({},y.body),e.body)):void 0});R(t);let i=t.status;M(i);let a=await c(t);i>=200&&i<400?(h&&(o[I]=a),H(a),J(null),v(a,t),Y(0)):(g&&H(g),J(!0),p(a,t))}catch(l){let d=null==l?void 0:l.toString();d.match(/abort/i)?o[I]||H(g):(H(void 0),J(Error(l)),p(l))}finally{V(!1)}}s(()=>{let{signal:e}=Z||{},n=()=>{let e=setTimeout(()=>{b(),clearTimeout(e)})};return null==e||e.addEventListener("abort",n),()=>{null==e||e.removeEventListener("abort",n)}},[Z,b]);let es=JSON.stringify(Object.assign(r,{children:void 0},{resolver:void 0},{reqQuery:O},{reqParams:w})),et=React.useCallback(async function e(n={}){n.body?x(n.body):(null==y?void 0:y.body)&&x(y.body),n.headers?B(e=>Object.assign(Object.assign({},e),n.headers)):B(e=>Object.assign(Object.assign({},e),y.headers)),Q||(V(!0),en(n))},[es,Q]);s(()=>{function e(){let e=!1;l({cancel:function n(){e=!0}}),e||et()}if("undefined"!=typeof window&&"addEventListener"in window&&u)return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}},[l,u]),s(()=>{function e(){d()}if("undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("offline",e),()=>{window.removeEventListener("offline",e)}},[l]),s(()=>{B(e=>Object.assign(Object.assign({},e),r.headers))},[r.headers]),s(()=>{if(z&&X<T){let e=setTimeout(()=>{et(),Y(e=>e+1),clearTimeout(e)},1e3*U)}},[z,T,U,X]),s(()=>{if(m>0&&$){let e=setTimeout(et,1e3*m);return()=>clearTimeout(e)}},[m,Q,z,D,y]),s(()=>{let e=setTimeout(()=>{k&&($?(V(!0),en()):(void 0===D&&H(g),J(null),V(!1)))},0);return()=>{clearTimeout(e)}},[f,es,r.children,m,JSON.stringify(y),k,]),s(()=>{if(P&&"undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("focus",et),()=>{window.removeEventListener("focus",et)}},[f,P,es,Q,r.children,m,JSON.stringify(y),]);let ei=Object.assign(Object.assign({},y),{params:w,headers:F,body:G,url:I,query:O});return{data:D,loading:Q,error:z,code:W,reFetch:et,mutate:H,abort(){Z.abort(),Q&&(J(!1),V(!1),H(o[I]))},config:ei,response:K}};d.get=r("GET","",{}),d.delete=r("DELETE","",{}),d.head=r("HEAD","",{}),d.options=r("OPTIONS","",{}),d.post=r("POST","",{}),d.put=r("PUT","",{}),d.patch=r("PATCH","",{}),d.purge=r("PURGE","",{}),d.link=r("LINK","",{}),d.unlink=r("UNLINK","",{}),d.extend=function n(s={}){let{baseUrl:t,headers:o={},body:u={},query:f={},resolver:g}=s;function y(n,s){let r=i(a),l="string"==typeof n?Object.assign({url:n},s):n,{url:f="",config:y={}}=l,c=e(l,["url","config"]);return d(Object.assign(Object.assign({},c),{url:`${f}`,resolver:g||c.resolver||r.resolver||(e=>e.json()),config:{baseUrl:void 0===y.baseUrl?void 0===r.baseUrl?t:r.baseUrl:y.baseUrl,method:y.method,headers:Object.assign(Object.assign(Object.assign({},o),r.headers),y.headers),body:Object.assign(Object.assign(Object.assign({},u),r.body),y.body)}}))}return y.config={baseUrl:t,headers:o,body:u,query:f},y.get=r("GET",t,o,f),y.delete=r("DELETE",t,o,f),y.head=r("HEAD",t,o,f),y.options=r("OPTIONS",t,o,f),y.post=r("POST",t,o,f),y.put=r("PUT",t,o,f),y.patch=r("PATCH",t,o,f),y.purge=r("PURGE",t,o,f),y.link=r("LINK",t,o,f),y.unlink=r("UNLINK",t,o,f),y.Config=l,y};let u={headers:{},body:void 0};class f{constructor(e){this.baseUrl="",this.baseUrl=e}async get(e,{headers:n,body:s}=u,t="GET"){let i=`${this.baseUrl}${e}`,r=await fetch(i,Object.assign({method:t,headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},n)},s?{body:JSON.stringify(s)}:{})),a=await r.json();return a}async post(e,n=u){return await this.get(e,n,"POST")}async put(e,n=u){return await this.get(e,n,"PUT")}async delete(e,n=u){return await this.get(e,n,"DELETE")}}function g(e){return new f(e)}window.createHttpClient=g,window.fetcher=d,window.FetcherConfig=l,window.useFetcher=d})();