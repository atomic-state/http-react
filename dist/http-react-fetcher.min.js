/**
 * @license http-react-fetcher
 * Copyright (c) Dany Beltran
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ (()=>{var f=this&&this.__rest||function(b,e){var d={};for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&0>e.indexOf(a)&&(d[a]=b[a]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,a=Object.getOwnPropertySymbols(b);c<a.length;c++)0>e.indexOf(a[c])&&Object.prototype.propertyIsEnumerable.call(b,a[c])&&(d[a[c]]=b[a[c]]);return d};function b(a,b,c){return async function(e,m={}){let{default:j,resolver:n=a=>a.json(),config:o={},onResolve:p=()=>{},onError:k=()=>{}}=m,{headers:q={},body:f,formatBody:i}=o,g={method:a,headers:Object.assign(Object.assign({"Content-Type":"application/json"},c),q),body:(null==a?void 0:a.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof i?i((FormData,f)):!1===i||"undefined"!=typeof FormData&&f instanceof FormData?f:JSON.stringify(f):void 0},h;try{let d=await fetch(`${b||""}${e}`,g);h=d;let l=await n(d);if((null==d?void 0:d.status)>=400)return k(!0),{res:d,data:j,error:!0,code:null==d?void 0:d.status,config:Object.assign({url:`${b||""}${e}`},g)};return p(l,d),{res:d,data:l,error:!1,code:null==d?void 0:d.status,config:Object.assign({url:`${b||""}${e}`},g)}}catch(r){return k(r),{res:h,data:j,error:!0,code:null==h?void 0:h.status,config:Object.assign({url:`${b||""}${e}`},g)}}}}let g=React.createContext({defaults:{},attempts:0,attemptInterval:5}),h={};function c(a){let{children:i,defaults:c={},baseUrl:d}=a,b=React.useContext(g),j=void 0===d?void 0===b.baseUrl?"":b.baseUrl:d;for(let e in c)h[`${j}${e}`]=c[e];let f=Object.assign(Object.assign({},b),a);for(let k in a)"headers"===k&&(f.headers=Object.assign(Object.assign({},b.headers),a.headers));return React.createElement(g.Provider,{value:f},i)}let a=(c,l)=>{let a=React.useContext(g),{url:e="/",default:m,config:b={baseUrl:void 0,method:"GET",headers:{},body:void 0,formatBody:!1},resolver:A="function"==typeof a.resolver?a.resolver:a=>a.json(),onError:B=()=>{},auto:C=void 0===a.auto||a.memory,memory:n=void 0===a.memory||a.memory,onResolve:D=()=>{},onAbort:o=()=>{},refresh:f=void 0===a.refresh?0:a.refresh,cancelOnChange:E=void 0!==a.refresh&&a.refresh,attempts:p=a.attempts,attemptInterval:q=a.attemptInterval}="string"==typeof c?Object.assign({url:c},l):c,i=(void 0===b.baseUrl?void 0===a.baseUrl?"":a.baseUrl:b.baseUrl)+e,r=i.split("?")[0],[j,s]=React.useState(n&&h[r]||m),[t,F]=React.useState("undefined"!=typeof FormData?b.body instanceof FormData?b.body:void 0!==a.body|| void 0!==b.body?Object.assign(Object.assign({},a.body),b.body):void 0:b.body),[u,G]=React.useState(Object.assign(Object.assign({},a.headers),b.headers)),[v,H]=React.useState(),[w,I]=React.useState(),[d,J]=React.useState(null),[k,K]=React.useState(!0),[x,L]=React.useState(0),[y,M]=React.useState(new AbortController);async function N(e={}){var f;E&&(null==y||y.abort());let j=new AbortController;M(j),J(null);try{let a=await fetch(i,{signal:j.signal,method:b.method,headers:Object.assign(Object.assign({"Content-Type":"undefined"!=typeof FormData&&b.body instanceof FormData?"multipart/form-data":"application/json"},b.headers),e.headers),body:(null===(f=b.method)|| void 0===f?void 0:f.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof b.formatBody?b.formatBody("undefined"!=typeof FormData&&b.body instanceof FormData?b.body:Object.assign(Object.assign({},b.body),e.body)):!1===b.formatBody||"undefined"!=typeof FormData&&b.body instanceof FormData?b.body:JSON.stringify(Object.assign(Object.assign({},b.body),e.body)):void 0});H(a);let g=a.status;I(g);let c=await A(a);g>=200&&g<400?(n&&(h[r]=c),s(c),J(null),D(c,a),L(0)):(m&&s(m),J(!0),B(c,a))}catch(d){let k=null==d?void 0:d.toString();k.match(/abort/i)?h[r]||s(m):(s(void 0),J(new Error(d)),B(d))}finally{K(!1)}}async function z(a={}){a.body&&F(b=>Object.assign(Object.assign({},b),a.body)),a.headers&&G(b=>Object.assign(Object.assign({},b),a.headers)),k||(K(!0),N(a))}return React.useEffect(()=>{let{signal:a}=y||{},b=()=>{let a=setTimeout(()=>{o(),clearTimeout(a)})};return null==a||a.addEventListener("abort",b),()=>{null==a||a.removeEventListener("abort",b)}},[y,o]),React.useEffect(()=>{if(d&&x<p){let a=setTimeout(()=>{z(),L(a=>a+1),clearTimeout(a)},1e3*q)}},[d,p,q,x]),React.useEffect(()=>{if(f>0&&C){let a=setTimeout(z,1e3*f);return()=>clearTimeout(a)}},[f,k,d,j,b]),React.useEffect(()=>{C?(K(!0),N()):(void 0===j&&s(m),J(null),K(!1))},[e,f,JSON.stringify(b)]),{data:j,loading:k,error:d,code:w,reFetch:z,mutate:s,abort(){y.abort(),k&&(J(!1),K(!1),s(h[r]))},config:Object.assign(Object.assign({},b),{headers:u,body:t,url:i}),response:v}};a.get=b("GET","",{}),a.delete=b("DELETE","",{}),a.head=b("HEAD","",{}),a.options=b("OPTIONS","",{}),a.post=b("POST","",{}),a.put=b("PUT","",{}),a.patch=b("PATCH","",{}),a.purge=b("PURGE","",{}),a.link=b("LINK","",{}),a.unlink=b("UNLINK","",{}),a.extend=function(i={}){let{baseUrl:e,headers:h={},body:j={},resolver:k}=i;function d(d,m){let b=React.useContext(g),i="string"==typeof d?Object.assign({url:d},m):d,{url:n="",config:c={}}=i,l=f(i,["url","config"]);return a(Object.assign(Object.assign({},l),{url:`${n}`,resolver:k||l.resolver||b.resolver||(a=>a.json()),config:{baseUrl:void 0===c.baseUrl?void 0===b.baseUrl?e:b.baseUrl:c.baseUrl,method:c.method,headers:Object.assign(Object.assign(Object.assign({},h),b.headers),c.headers),body:Object.assign(Object.assign(Object.assign({},j),b.body),c.body)}}))}return d.config={baseUrl:e,headers:h,body:j},d.get=b("GET",e,h),d.delete=b("DELETE",e,h),d.head=b("HEAD",e,h),d.options=b("OPTIONS",e,h),d.post=b("POST",e,h),d.put=b("PUT",e,h),d.patch=b("PATCH",e,h),d.purge=b("PURGE",e,h),d.link=b("LINK",e,h),d.unlink=b("UNLINK",e,h),d.Config=c,d};let d=a,i={headers:{},body:void 0};class j{constructor(a){this.baseUrl="",this.baseUrl=a}async get(b,{headers:c,body:a}=i,d="GET"){let e=`${this.baseUrl}${b}`,f=await fetch(e,Object.assign({method:d,headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},c)},a?{body:JSON.stringify(a)}:{})),g=await f.json();return g}async post(a,b=i){return await this.get(a,b,"POST")}async put(a,b=i){return await this.get(a,b,"PUT")}async delete(a,b=i){return await this.get(a,b,"DELETE")}}function e(a){return new j(a)}window.useFetcher=a,window.createHttpClient=e,window.FetcherConfig=c,window.fetcher=d})()