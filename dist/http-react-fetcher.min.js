/**
 * @license http-react-fetcher
 * Copyright (c) Dany Beltran
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ (()=>{var g=this&&this.__rest||function(b,e){var d={};for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&0>e.indexOf(a)&&(d[a]=b[a]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,a=Object.getOwnPropertySymbols(b);c<a.length;c++)0>e.indexOf(a[c])&&Object.prototype.propertyIsEnumerable.call(b,a[c])&&(d[a[c]]=b[a[c]]);return d};function b(a,b,c){return async function(e,m={}){let{default:j,resolver:n=a=>a.json(),config:o={},onResolve:p=()=>{},onError:k=()=>{}}=m,{headers:q={},body:f,formatBody:i}=o,g={method:a,headers:Object.assign(Object.assign({"Content-Type":"application/json"},c),q),body:(null==a?void 0:a.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof i?i((FormData,f)):!1===i||"undefined"!=typeof FormData&&f instanceof FormData?f:JSON.stringify(f):void 0},h;try{let d=await fetch(`${b||""}${e}`,g);h=d;let l=await n(d);if((null==d?void 0:d.status)>=400)return k(!0),{res:d,data:j,error:!0,code:null==d?void 0:d.status,config:Object.assign({url:`${b||""}${e}`},g)};return p(l,d),{res:d,data:l,error:!1,code:null==d?void 0:d.status,config:Object.assign({url:`${b||""}${e}`},g)}}catch(r){return k(r),{res:h,data:j,error:!0,code:null==h?void 0:h.status,config:Object.assign({url:`${b||""}${e}`},g)}}}}let h=React.createContext({defaults:{},attempts:0,attemptInterval:5,revalidateOnFocus:!1}),c=({url:g="/",default:h,config:a={method:"GET",headers:{},body:{}},children:b,onError:i=()=>{},onResolve:j=()=>{},refresh:c=0})=>{let[d,k]=React.useState(h),[e,l]=React.useState(null),[f,m]=React.useState(!0);async function n(){var b;try{let c=await fetch(g,{method:a.method,headers:Object.assign({"Content-Type":"application/json"},a.headers),body:(null===(b=a.method)|| void 0===b?void 0:b.match(/(POST|PUT|DELETE|PATCH)/))?JSON.stringify(a.body):void 0}),d=await c.json(),e=c.status;e>=200&&e<300?(k(d),l(null),j(d,c)):(h&&k(h),l(!0),i(d))}catch(f){k(void 0),l(new Error(f)),i(f)}finally{m(!1)}}return(React.useEffect(()=>{async function a(){(d||e)&&!f&&(m(!0),n())}if(c>0){let b=setTimeout(a,1e3*c);return()=>clearTimeout(b)}},[c,f,e,d,a]),React.useEffect(()=>{m(!0),n()},[g,c,a]),void 0!==b)?React.createElement(b,{data:d,error:e,loading:f}):null},i={};function d(a){let{children:g,defaults:c={},baseUrl:d}=a,b=React.useContext(h),j=void 0===d?void 0===b.baseUrl?"":b.baseUrl:d;for(let e in c)i[`${j}${e}`]=c[e];let f=Object.assign(Object.assign({},b),a);for(let k in a)"headers"===k&&(f.headers=Object.assign(Object.assign({},b.headers),a.headers));return React.createElement(h.Provider,{value:f},g)}let a=(c,m)=>{let a=React.useContext(h),{url:d="/",default:n,config:b={baseUrl:void 0,method:"GET",headers:{},body:void 0,formatBody:!1},resolver:C="function"==typeof a.resolver?a.resolver:a=>a.json(),onError:D=()=>{},auto:E=void 0===a.auto||a.memory,memory:o=void 0===a.memory||a.memory,onResolve:F=()=>{},onAbort:p=()=>{},refresh:e=void 0===a.refresh?0:a.refresh,cancelOnChange:G=void 0!==a.refresh&&a.refresh,attempts:q=a.attempts,attemptInterval:r=a.attemptInterval,revalidateOnFocus:s=a.revalidateOnFocus}="string"==typeof c?Object.assign({url:c},m):c,j=(void 0===b.baseUrl?void 0===a.baseUrl?"":a.baseUrl:b.baseUrl)+d,t=j.split("?")[0],[k,u]=React.useState(o&&i[t]||n),[v,H]=React.useState("undefined"!=typeof FormData?b.body instanceof FormData?b.body:void 0!==a.body|| void 0!==b.body?Object.assign(Object.assign({},a.body),b.body):void 0:b.body),[w,I]=React.useState(Object.assign(Object.assign({},a.headers),b.headers)),[x,J]=React.useState(),[y,K]=React.useState(),[f,L]=React.useState(null),[g,M]=React.useState(!0),[z,N]=React.useState(0),[A,O]=React.useState(new AbortController);async function P(e={}){var f;G&&(null==A||A.abort());let h=new AbortController;O(h),L(null);try{let a=await fetch(j,{signal:h.signal,method:b.method,headers:Object.assign(Object.assign({"Content-Type":"undefined"!=typeof FormData&&b.body instanceof FormData?"multipart/form-data":"application/json"},b.headers),e.headers),body:(null===(f=b.method)|| void 0===f?void 0:f.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof b.formatBody?b.formatBody("undefined"!=typeof FormData&&b.body instanceof FormData?b.body:Object.assign(Object.assign({},b.body),e.body)):!1===b.formatBody||"undefined"!=typeof FormData&&b.body instanceof FormData?b.body:JSON.stringify(Object.assign(Object.assign({},b.body),e.body)):void 0});J(a);let g=a.status;K(g);let c=await C(a);g>=200&&g<400?(o&&(i[t]=c),u(c),L(null),F(c,a),N(0)):(n&&u(n),L(!0),D(c,a))}catch(d){let k=null==d?void 0:d.toString();k.match(/abort/i)?i[t]||u(n):(u(void 0),L(new Error(d)),D(d))}finally{M(!1)}}async function B(a={}){a.body&&H(b=>Object.assign(Object.assign({},b),a.body)),a.headers&&I(b=>Object.assign(Object.assign({},b),a.headers)),g||(M(!0),P(a))}React.useEffect(()=>{let{signal:a}=A||{},b=()=>{let a=setTimeout(()=>{p(),clearTimeout(a)})};return null==a||a.addEventListener("abort",b),()=>{null==a||a.removeEventListener("abort",b)}},[A,p]),React.useEffect(()=>{I(b=>({...b,...a.headers}))},[a.headers]),React.useEffect(()=>{if(f&&z<q){let a=setTimeout(()=>{B(),N(a=>a+1),clearTimeout(a)},1e3*r)}},[f,q,r,z]),React.useEffect(()=>{if(e>0&&E){let a=setTimeout(B,1e3*e);return()=>clearTimeout(a)}},[e,g,f,k,b]);let l=JSON.stringify(Object.assign(a,{children:void 0},{resolver:void 0}));return React.useEffect(()=>{E?(M(!0),P()):(void 0===k&&u(n),L(null),M(!1))},[d,l,a.children,e,JSON.stringify(b)]),React.useEffect(()=>{if(s&&"undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("focus",B),()=>{window.removeEventListener("focus",B)}},[d,s,l,g,a.children,e,JSON.stringify(b),]),{data:k,loading:g,error:f,code:y,reFetch:B,mutate:u,abort(){A.abort(),g&&(L(!1),M(!1),u(i[t]))},config:Object.assign(Object.assign({},b),{headers:w,body:v,url:j}),response:x}};a.get=b("GET","",{}),a.delete=b("DELETE","",{}),a.head=b("HEAD","",{}),a.options=b("OPTIONS","",{}),a.post=b("POST","",{}),a.put=b("PUT","",{}),a.patch=b("PATCH","",{}),a.purge=b("PURGE","",{}),a.link=b("LINK","",{}),a.unlink=b("UNLINK","",{}),a.extend=function(i={}){let{baseUrl:e,headers:f={},body:j={},resolver:k}=i;function c(d,m){let b=React.useContext(h),i="string"==typeof d?Object.assign({url:d},m):d,{url:n="",config:c={}}=i,l=g(i,["url","config"]);return a(Object.assign(Object.assign({},l),{url:`${n}`,resolver:k||l.resolver||b.resolver||(a=>a.json()),config:{baseUrl:void 0===c.baseUrl?void 0===b.baseUrl?e:b.baseUrl:c.baseUrl,method:c.method,headers:Object.assign(Object.assign(Object.assign({},f),b.headers),c.headers),body:Object.assign(Object.assign(Object.assign({},j),b.body),c.body)}}))}return c.config={baseUrl:e,headers:f,body:j},c.get=b("GET",e,f),c.delete=b("DELETE",e,f),c.head=b("HEAD",e,f),c.options=b("OPTIONS",e,f),c.post=b("POST",e,f),c.put=b("PUT",e,f),c.patch=b("PATCH",e,f),c.purge=b("PURGE",e,f),c.link=b("LINK",e,f),c.unlink=b("UNLINK",e,f),c.Config=d,c};let e=a,j={headers:{},body:void 0};class k{constructor(a){this.baseUrl="",this.baseUrl=a}async get(b,{headers:c,body:a}=j,d="GET"){let e=`${this.baseUrl}${b}`,f=await fetch(e,Object.assign({method:d,headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},c)},a?{body:JSON.stringify(a)}:{})),g=await f.json();return g}async post(a,b=j){return await this.get(a,b,"POST")}async put(a,b=j){return await this.get(a,b,"PUT")}async delete(a,b=j){return await this.get(a,b,"DELETE")}}function f(a){return new k(a)}window.Fetcher=c,window.useFetcher=a,window.createHttpClient=f,window.FetcherConfig=d,window.fetcher=e})()