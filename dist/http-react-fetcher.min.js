/**
 * @license http-react-fetcher
 * Copyright (c) Dany Beltran
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ (()=>{var e=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)0>t.indexOf(n[s])&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(i[n[s]]=e[n[s]]);return i};let{useState:t,useEffect:i,createContext:n,useContext:s}=React;class r{constructor(){this.suscribers={}}async addListener(e,t){e in this.suscribers||(this.suscribers[e]={});let i=Object.keys(this.suscribers[e]).length+1;"__proto__"!==e&&"prototype"!==e?this.suscribers[e][i]=t:console.warn('"prototype" and "__proto__" are not valid message names')}async removeListener(e,t){for(let i in this.suscribers[e])this.suscribers[e][i]===t&&delete this.suscribers[e][i]}emit(e,t){for(let i in this.suscribers[e])this.suscribers[e][i](t)}}function o(e,t,i,n){return async function(s,r={}){let{default:o,resolver:a=e=>e.json(),config:l={},onResolve:d=()=>{},onError:u=()=>{}}=r,f=Object.assign(Object.assign({},n),l.query),[,g=""]=s.split("?");g.split("&").forEach(e=>{let[t,i]=e.split("=");f[t]!==i&&(f=Object.assign(Object.assign({},f),{[t]:i}))});let y=Object.keys(f).map(e=>[e,f[e]].join("=")).join("&"),{headers:c={},body:$,formatBody:v}=l,m={method:e,headers:Object.assign(Object.assign({"Content-Type":"application/json"},i),c),body:(null==e?void 0:e.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof v?v($):!1===v||"undefined"!=typeof FormData&&$ instanceof FormData?$:JSON.stringify($):void 0},p;try{let h=await fetch(`${t||""}${s}${s.includes("?")?`&${y}`:`?${y}`}`,m);p=h;let b=await a(h);if((null==h?void 0:h.status)>=400)return u(!0),{res:h,data:o,error:!0,code:null==h?void 0:h.status,config:Object.assign(Object.assign({url:`${t||""}${s}`},m),{query:f})};return d(b,h),{res:h,data:b,error:!1,code:null==h?void 0:h.status,config:Object.assign(Object.assign({url:`${t||""}${s}`},m),{query:f})}}catch(E){return u(E),{res:p,data:o,error:!0,code:null==p?void 0:p.status,config:Object.assign(Object.assign({url:`${t||""}${s}`},m),{query:f})}}}}let a={},l={},d=()=>{let e=new r;return e},u=d(),f=n({defaults:{},attempts:0,attemptInterval:2,revalidateOnFocus:!1,query:{},params:{},onOffline(){},onOnline(){},online:!0,retryOnReconnect:!0}),g={},y={get:e=>g[e],set(e,t){g[e]=t},delete(e){delete g[e]}},c={};function $(e){var t,i,n,r,o;let{children:a,defaults:l={},baseUrl:d}=e,u=s(f),{cache:g=y}=u,$=void 0===d?void 0===u.baseUrl?"":u.baseUrl:d;for(let v in l){let{id:p}=l[v],h=JSON.stringify({uri:void 0===p?`${$}${v}`:void 0,idString:void 0===p?void 0:JSON.stringify(p),config:void 0===p?{method:null===(i=null===(t=l[v])||void 0===t?void 0:t.config)||void 0===i?void 0:i.method}:void 0});void 0!==p&&(c[JSON.stringify(p)]=null===(n=l[v])||void 0===n?void 0:n.value,m[JSON.stringify(p)]=null===(r=l[v])||void 0===r?void 0:r.value),g.set(h,null===(o=l[v])||void 0===o?void 0:o.value)}let b=Object.assign(Object.assign(Object.assign({},u),e),{headers:Object.assign(Object.assign({},u.headers),e.headers)});return React.createElement(f.Provider,{value:b},a)}function v(e){if(Array.isArray(e))e.map(e=>{if(void 0!==e){let t=JSON.stringify(e),i=JSON.stringify({idString:t});l[i]=void 0,u.emit(t)}});else if(void 0!==e){let t=JSON.stringify(e),i=JSON.stringify({idString:t});l[i]=void 0,u.emit(t)}}let m={},p={};function h(...e){for(let t of e)try{let[i,n,s]=t,r=JSON.stringify({idString:JSON.stringify(i)});if("function"==typeof n){let o=n(p[r]);u.emit(r,{data:o,requestCallId:""}),s&&(l[r]=void 0,u.emit(JSON.stringify(i)))}else u.emit(r,{requestCallId:"",data:n}),s&&(l[r]=void 0,u.emit(JSON.stringify(i)))}catch(a){}}function b(){let e=s(f);for(let t in e)t.match(/[0-9]/)&&delete e[t];return e}function E(e){let{data:t}=L({id:e});return t}function _(e){let t=JSON.stringify({idString:JSON.stringify(e)}),{data:i}=L({id:e});return void 0===a[t]||a[t]}function T(e){let{error:t}=L({id:e});return t}function q(e){let t=JSON.stringify({idString:JSON.stringify(e)}),i=m[t];return L({id:e,default:i})}let L=(e,n)=>{let r=s(f),{cache:o=y}={},d="string"==typeof e?Object.assign({url:e},n):e,{onOnline:g=r.onOnline,onOffline:$=r.onOffline,url:v="",id:h,config:b={query:{},params:{},baseUrl:void 0,method:"GET",headers:{},body:void 0,formatBody:!1},resolver:E="function"==typeof r.resolver?r.resolver:e=>e.json(),onError:_=()=>{},auto:T=void 0===r.auto||r.auto,memory:q=void 0===r.memory||r.memory,onResolve:L=()=>{},onAbort:U=()=>{},refresh:O=void 0===r.refresh?0:r.refresh,cancelOnChange:P=!1,attempts:w=r.attempts,attemptInterval:j=r.attemptInterval,revalidateOnFocus:S=r.revalidateOnFocus}=d,C=React.useMemo(()=>`${Math.random()}`.split(".")[1],[]),I=!1!==d.auto&&(void 0!==d.retryOnReconnect?d.retryOnReconnect:r.retryOnReconnect),k=JSON.stringify(h),[A,F]=t(Object.assign(Object.assign({},r.query),b.query)),[D,N]=t(Object.assign(Object.assign({},r.params),b.params));i(()=>{N(Object.assign(Object.assign({},r.params),b.params))},[JSON.stringify(Object.assign(Object.assign({},r.params),b.params)),]),i(()=>{F(Object.assign(Object.assign({},r.query),b.query))},[JSON.stringify(r.query),JSON.stringify(b.query),v]);let H=(v.startsWith("http://")||v.startsWith("https://")?"":void 0===b.baseUrl?void 0===r.baseUrl?"":r.baseUrl:b.baseUrl)+v,G=React.useMemo(()=>H.split("/").map(e=>{if(e.startsWith("[")&&e.endsWith("]")){let t=e.replace(/\[|\]/g,"");return t in D?D[e.replace(/\[|\]/g,"")]:(console.warn(`Param '${t}' does not exist in request configuration for '${v}'`),t)}if(!e.startsWith(":"))return e;{let i=e.split("").slice(1).join("");return i in D?D[i]:(console.warn(`Param '${i}' does not exist in request configuration for '${v}'`),i)}}).join("/"),[JSON.stringify(D),b.baseUrl,r.baseUrl,v]),R=G+(G.includes("?")?"&":"?"),[x,M]=R.split("?"),W=JSON.stringify({uri:void 0===h?H:void 0,idString:void 0===h?void 0:k,config:void 0===h?{method:null==b?void 0:b.method}:void 0});i(()=>{void 0!==d.default?void 0===m[k]&&(""!==v?m[k]=d.default:u.emit(W,{requestCallId:C,data:d.default})):void 0!==m[k]&&J(m[k])},[k]);let B=k in m?m[k]:d.default;i(()=>{T||(a[W]=!1)},[]),i(()=>{let e={},t=M.split("&");t.forEach((t,i)=>{let[n,s]=t.split("=");e[n]!==s&&(e[n]=`${s}`)});let i=setTimeout(()=>{F(t=>Object.assign(Object.assign({},t),e)),clearTimeout(i)},0),n=setTimeout(()=>{clearTimeout(n)},0)},[JSON.stringify(A)]);let K=o.get(W),[z,J]=t(q&&(K||c[H])||B),Q=JSON.stringify(z),[V,X]=t(!0),[Y,Z]=t("undefined"!=typeof FormData?b.body instanceof FormData?b.body:void 0!==r.body||void 0!==b.body?Object.assign(Object.assign({},r.body),b.body):void 0:b.body),[ee,et]=t(Object.assign(Object.assign({},r.headers),b.headers)),[ei,en]=t(),[es,er]=t(),[eo,ea]=t(null),[el,ed]=t(!0),[eu,ef]=t(0),[eg,ey]=t(new AbortController);async function ec(e={}){var t;if(l[W]!==JSON.stringify(d)&&(P&&(null==eg||eg.abort()),!a[W])){ed(!0),l[W]=JSON.stringify(d),a[W]=!0;let i=new AbortController;ey(i),ea(null),u.emit(W,{requestCallId:C,loading:el,requestAbortController:i,error:null});try{let n=await fetch(R+e.query,{signal:i.signal,method:b.method,headers:Object.assign(Object.assign(Object.assign({"Content-Type":"undefined"!=typeof FormData&&b.body instanceof FormData?"multipart/form-data":"application/json"},r.headers),b.headers),e.headers),body:(null===(t=b.method)||void 0===t?void 0:t.match(/(POST|PUT|DELETE|PATCH)/))?"function"==typeof b.formatBody?b.formatBody("undefined"!=typeof FormData&&b.body instanceof FormData?b.body:Object.assign(Object.assign({},b.body),e.body)):!1===b.formatBody||"undefined"!=typeof FormData&&b.body instanceof FormData?b.body:JSON.stringify(Object.assign(Object.assign({},b.body),e.body)):void 0});u.emit(W,{requestCallId:C,response:n});let s=n.status;er(s),u.emit(W,{requestCallId:C,code:s});let f=await E(n);s>=200&&s<400?(q&&(o.set(W,f),c[k]=f),J(f),p[k]=f,ea(null),u.emit(W,{requestCallId:C,data:f,error:null}),L(f,n),u.emit(k+"value",{data:f}),a[W]=!1,ef(0),u.emit(W,{requestCallId:C,completedAttempts:0})):(B&&(J(B),p[k]=B,u.emit(W,{requestCallId:C,data:B})),ea(!0),u.emit(W,{requestCallId:C,error:!0}),_(f,n),a[W]=!1)}catch(g){let y=null==g?void 0:g.toString();if(`${y}`.match(/abort/i))void 0===K&&(void 0!==B&&(J(B),p[k]=B),u.emit(W,{requestCallId:C,data:B}));else{void 0===K?(J(B),p[k]=B,u.emit(W,{requestCallId:C,data:B})):(J(K),p[k]=K,u.emit(W,{requestCallId:C,data:K}));let $=Error(g);ea($),u.emit(W,{requestCallId:C,error:$}),_(g)}}finally{ed(!1),a[W]=!1,u.emit(W,{requestCallId:C,loading:!1})}}}i(()=>{let{signal:e}=eg||{},t=()=>{el&&a[W]&&U()};return null==e||e.addEventListener("abort",t),()=>{null==e||e.removeEventListener("abort",t)}},[eg,W,U,el]);let e$=JSON.stringify(Object.assign(r,{children:void 0},null==b?void 0:b.headers,null==b?void 0:b.method,null==b?void 0:b.body,null==b?void 0:b.query,null==b?void 0:b.params,{resolver:void 0},{reqQuery:A},{reqParams:D}));i(()=>{async function e(e){if(e.requestCallId!==C){let{isMutating:t,data:i,error:n,online:s,loading:r,response:o,requestAbortController:a,code:l,completedAttempts:d}=e;void 0!==d&&ef(d),void 0!==l&&er(l),void 0!==a&&ey(a),void 0!==o&&en(o),void 0!==r&&ed(r),void 0!==i&&(J(i),p[k]=i,t||L(i),ea(null)),void 0!==n&&(ea(n),null!==n&&!1!==n&&_(n)),void 0!==s&&X(s)}}return u.addListener(W,e),()=>{u.removeListener(W,e)}},[W,h,eg,e$]);let ev=React.useCallback(async function e(){if(!el&&!a[W]){l[W]=void 0,ed(!0);let t=Object.assign(Object.assign({},r.query),b.query);ec({query:Object.keys(t).map(e=>[e,t[e]].join("=")).join("&")}),u.emit(W,{requestCallId:C,loading:!0})}},[e$,P,eg,el]);i(()=>{async function e(e){if(void 0!==(null==e?void 0:e.data))try{let{data:i}=e;void 0!==z&&(J(i),p[t]=i,o.set(W,i),c[t]=i)}catch(n){}else if(ed(!0),ea(null),!a[W]&&""!==v){u.emit(W,{requestCallId:C,loading:!0,error:null});let s=Object.assign(Object.assign({},r.query),b.query);ec({query:Object.keys(s).map(e=>[e,s[e]].join("=")).join("&")})}}let t=JSON.stringify(h);return u.addListener(t,e),()=>{u.removeListener(t,e)}},[W,e$,k,h]),i(()=>{function e(){let e=!1;u.emit(W,{requestCallId:C,online:!0}),X(!0),g({cancel:function t(){e=!0}}),e||ev()}if("undefined"!=typeof window&&"addEventListener"in window&&I)return window.addEventListener("online",e),()=>{window.removeEventListener("online",e)}},[g,ev,W,I]),i(()=>{function e(){a[W]=!1,X(!1),u.emit(W,{requestCallId:C,online:!1}),$()}if("undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("offline",e),()=>{window.removeEventListener("offline",e)}},[$,ev,W,I]),i(()=>{et(e=>Object.assign(Object.assign({},e),r.headers))},[r.headers]),i(()=>{l[W]=void 0},[C]),i(()=>{let e=setTimeout(()=>{eo&&(eu<w?(ev(),ef(e=>{let t=e+1;return u.emit(W,{requestCallId:C,completedAttempts:t}),t})):eu===w&&(u.emit(W,{requestCallId:C,online:!1}),X(!1)),clearTimeout(e))},1e3*j);return()=>{clearInterval(e)}},[eo,w,Q,j,eu]),i(()=>{if(0===eu&&O>0&&T){let e=setTimeout(ev,1e3*O);return()=>clearTimeout(e)}},[O,el,eo,Q,eu,b]);let em=React.useMemo(()=>JSON.stringify(d),[]);i(()=>{if(T){if(""!==v){a[W]&&ed(!0);let e=Object.assign(Object.assign({},r.query),b.query);ec({query:Object.keys(e).map(t=>[t,e[t]].join("=")).join("&")})}else ea(null),ed(!1)}else void 0===z&&(J(B),p[k]=B),ea(null),ed(!1)},[em,v,e$,O,JSON.stringify(b),T]),i(()=>{if(S&&"undefined"!=typeof window&&"addEventListener"in window)return window.addEventListener("focus",ev),()=>{window.removeEventListener("focus",ev)}},[v,S,e$,el,ev,O,JSON.stringify(b),]);let ep=Object.assign(Object.assign({},b),{params:D,headers:ee,body:b.body,url:x,rawUrl:R,query:A});function eh(e){"function"!=typeof e?(o.set(W,e),c[k]=e,p[k]=e,u.emit(W,{requestCallId:C,isMutating:!0,data:e}),J(e)):J(t=>{let i=e(t);return o.set(W,i),c[k]=i,p[k]=i,u.emit(W,{requestCallId:C,data:i}),i})}let eb=React.useMemo(()=>z,[Q]);return{data:eb,loading:el,error:eo,online:V,code:es,reFetch:ev,mutate:eh,abort(){eg.abort(),el&&(ea(!1),ed(!1),J(K),u.emit(W,{requestCallId:C,error:!1,loading:!1,data:K}))},config:ep,response:ei,id:h,key:W}};L.get=o("GET","",{}),L.delete=o("DELETE","",{}),L.head=o("HEAD","",{}),L.options=o("OPTIONS","",{}),L.post=o("POST","",{}),L.put=o("PUT","",{}),L.patch=o("PATCH","",{}),L.purge=o("PURGE","",{}),L.link=o("LINK","",{}),L.unlink=o("UNLINK","",{}),L.extend=function t(i={}){let{baseUrl:n,headers:r={},body:a={},query:l={},resolver:d}=i;function u(t,i){let o=s(f),l="string"==typeof t?Object.assign({url:t},i):t,{url:u="",config:g={}}=l,y=e(l,["url","config"]);return L(Object.assign(Object.assign({},y),{url:`${u}`,resolver:d||y.resolver||o.resolver||(e=>e.json()),config:{baseUrl:void 0===g.baseUrl?void 0===o.baseUrl?n:o.baseUrl:g.baseUrl,method:g.method,headers:Object.assign(Object.assign(Object.assign({},r),o.headers),g.headers),body:Object.assign(Object.assign(Object.assign({},a),o.body),g.body)}}))}return u.config={baseUrl:n,headers:r,body:a,query:l},u.get=o("GET",n,r,l),u.delete=o("DELETE",n,r,l),u.head=o("HEAD",n,r,l),u.options=o("OPTIONS",n,r,l),u.post=o("POST",n,r,l),u.put=o("PUT",n,r,l),u.patch=o("PATCH",n,r,l),u.purge=o("PURGE",n,r,l),u.link=o("LINK",n,r,l),u.unlink=o("UNLINK",n,r,l),u.Config=$,u};let U=L,O={headers:{},body:void 0};class P{async get(e,{headers:t,body:i}=O,n="GET"){let s=`${this.baseUrl}${e}`,r=await fetch(s,Object.assign({method:n,headers:Object.assign({"Content-Type":"application/json",Accept:"application/json"},t)},i?{body:JSON.stringify(i)}:{})),o=await r.json();return o}async post(e,t=O){return await this.get(e,t,"POST")}async put(e,t=O){return await this.get(e,t,"PUT")}async delete(e,t=O){return await this.get(e,t,"DELETE")}constructor(e){this.baseUrl="",this.baseUrl=e}}function w(e){return new P(e)}window.FetcherConfig=$,window.fetcher=U,window.mutateData=h,window.revalidate=v,window.useFetcherConfig=b,window.useFetcher=L,window.useFetcherData=E,window.useFetcherError=T,window.useFetcherId=q,window.useFetcherLoading=_,window.createHttpClient=w})();